function e(e,t,a,n){Object.defineProperty(e,t,{get:a,set:n,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},n={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in a)return a[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return a[e]=r,t.call(r.exports,r,r.exports),r.exports}var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},t.parcelRequired7c6=r);var o=r.register;o("kyEFX",function(t,a){e(t.exports,"register",function(){return n},function(e){return n=e});var n,r=new Map;n=function(e,t){for(var a=0;a<t.length-1;a+=2)r.set(t[a],{baseUrl:e,path:t[a+1]})}}),o("52C1o",function(t,a){e(t.exports,"moviesEl",function(){return l});var n=r("7rYDH"),o=r("lV0gX"),s=r("2nhTy"),i=r("lJEtM");let l=document.querySelector(".movies");window.addEventListener("load",()=>{(0,s.resetCurrentPage)(),(0,n.fetchPopularMovies)(i.state.currentPage).then(e=>{if("local"===i.state.whatPaginated)return;i.state.whatPaginated="main";let{results:t,total_pages:a}=e;return i.state.totalPages=a,(0,s.renderPaginationMarkup)(),(0,o.renderGallery)(t)}).then(e=>{l?.insertAdjacentHTML("beforeend",e)})})}),o("7rYDH",function(t,a){e(t.exports,"fetchPopularMovies",function(){return o}),e(t.exports,"fetchMoviesByQuery",function(){return s}),e(t.exports,"fetchGenres",function(){return i});let n="https://api.themoviedb.org/3",r="9ce408291b177c2a2e598968d33c0b4a";async function o(e){let t=new URL(`${n}/trending/movie/week`);t.searchParams.append("api_key",r),t.searchParams.append("page",e);let a=await fetch(t);return await a.json()}async function s(e,t){let a=new URL(`${n}/search/movie`);a.searchParams.append("api_key",r),a.searchParams.append("query",e),a.searchParams.append("page",t);let o=await fetch(a);return await o.json()}async function i(){let e=new URL(`${n}/genre/movie/list`);e.searchParams.append("api_key",r);let t=await fetch(e);return(await t.json()).genres}}),o("lV0gX",function(t,a){e(t.exports,"renderGallery",function(){return o});var n=r("7rYDH");async function o(e){let t=await (0,n.fetchGenres)();return e.map(({id:a,poster_path:n,title:r,release_date:o,genre_ids:s,original_title:i,vote_average:l,popularity:c,vote_count:d,overview:u}=e)=>{let g=n?`https://image.tmdb.org/t/p/w500${n}`:"https://i.ibb.co/r76r6Vt/oie-30214851-Ms-Wl-PTS0.png",m=o?o.split("-")[0]:"Unknown",p=s?function(e,t){let a=[];for(let n of t){if("N/A"===e||0===e.length){a.push("Other");break}e.includes(n.id)&&a.push(n.name)}return a.length>2&&a.splice(2,a.length-2,"Other"),a.join(", ")}(s,t):"Unknown";return`
      <li class='movie_list_item' data-id="${a}" >
      <div href="" class='movie_list_link link' id=${a}>
      <div class="movie__cover--darkened"
        data-id="${a}"
        data-poster_path="${n}"
        data-title="${r}"
        data-genre_ids="${p}"
        data-original_title="${i}"
        data-vote_average="${l}"
        data-popularity="${c}"
        data-vote_count="${d}"
        data-overview="${u}"
        data-release_date="${o}"
      ></div>
        <img class="movie_list_image" src=${g} alt='Poster ${i}' loading='lazy' />
        <div class='movie-info'>
            <p class='movie-title'>
              <b>${r.toUpperCase()}</b>
            </p>
            <p class='movie-date'>
              <span>${p} | ${m}</span>
            </p>
            
        </div>
        </div>
      </li>
      `}).join("")}}),o("2nhTy",function(t,a){e(t.exports,"resetCurrentPage",function(){return g}),e(t.exports,"clearPagination",function(){return m}),e(t.exports,"renderPaginationMarkup",function(){return y}),e(t.exports,"onBtnPageClick",function(){return P});var n=r("7rYDH"),o=r("lV0gX"),s=r("b5rV1"),i=r("krGWQ"),l=r("4NPRg"),c=r("52C1o"),d=r("lJEtM");let{pagination:u}=i.refs,g=()=>{d.state.currentPage=1},m=()=>{u.innerHTML=""},p=async e=>{let t;switch(e){case"main":try{let{results:e}=await (0,n.fetchPopularMovies)(d.state.currentPage);t=await (0,o.renderGallery)(e),(0,c.moviesEl).insertAdjacentHTML("beforeend",t)}catch(e){console.error(e.message)}break;case"search":try{let{results:e}=await (0,n.fetchMoviesByQuery)(d.state.query,d.state.currentPage);t=await (0,o.renderGallery)(e),(0,c.moviesEl).insertAdjacentHTML("beforeend",t)}catch(e){console.error(e.message)}break;case"local":try{let e="WATCHED"===d.state.whatchedOrQueue?(0,s.getFromStorage)(s.localStorageKeys.WATCHED)||[]:(0,s.getFromStorage)(s.localStorageKeys.QUEUE)||[];t=await (0,o.renderGallery)((0,l.localPaginate)(e,d.state.currentPage))}catch(e){console.error(e.message)}break;default:throw Error(`Invalid 'where' parameter: ${e}`)}(0,c.moviesEl).insertAdjacentHTML("beforeend",t)},f=(e,t)=>{let a=Math.ceil(t/5),n=(a-1)*5+1;return{pages:Array.from({length:Math.min(n+5-1,e)-n+1},(e,t)=>n+t),hasPrevGroup:a>1,hasNextGroup:a<Math.ceil(e/5)}},v=()=>{if(d.state.totalPages<=1)return;let{pages:e,hasPrevGroup:t,hasNextGroup:a}=f(d.state.totalPages,d.state.currentPage),n=`<button type="button" class="end-btn page-btn">${d.state.totalPages}</button>`,r=`<button type="button" class="prev-btn page-btn"><svg class="icon icon-arrow-left">
    <use xlink:href="${d.state.sprite}#icon-arrow-left"></use>
  </svg></button>`,o=`<button type="button" class="next-btn page-btn"><svg class="icon icon-arrow-right">
    <use xlink:href="${d.state.sprite}#icon-arrow-right"></use>
  </svg></button>`;return(t?r+'<button type="button" class="start-btn page-btn">1</button><button class="page-btn prev-dots">...</button>':"")+e.map(e=>{let t=e===d.state.currentPage?"active-page":"";return`<button type="button" class="page-btn ${t}
        ">${e}</button>`}).join("")+(a?'<button class="page-btn next-dots">...</button>'+n+o:"")},y=()=>{u.insertAdjacentHTML("beforeend",v())},E=e=>{d.state.currentPage=e,m(),y()},h=()=>{E(d.state.currentPage+1)},b=()=>{E(d.state.currentPage-1)},T=()=>{let{pages:e}=f(d.state.totalPages,d.state.currentPage),t=Math.min(e[e.length-1]+1,d.state.totalPages);d.state.currentPage=e[e.length-1]+1,E(t)},w=()=>{let{pages:e}=f(d.state.totalPages,d.state.currentPage);E(Math.max(e[0]-1,1))},M=e=>{let t=document.querySelector(".active-page"),a=Number(e.target.textContent)||d.state.currentPage;a!==d.state.currentPage&&(E(a),t.classList.remove("active-page"),e.target.classList.add("active-page"))},P=async e=>{"BUTTON"===e.target.nodeName&&Number(e.target.textContent)!==d.state.currentPage&&(e.target.classList.contains("next-btn")&&h(),e.target.classList.contains("prev-btn")&&b(),e.target.classList.contains("next-dots")&&T(),e.target.classList.contains("prev-dots")&&w(),M(e),window.scrollTo({top:0}),c.moviesEl.innerHTML="",p(d.state.whatPaginated))}}),o("b5rV1",function(t,a){e(t.exports,"setToLocalStorage",function(){return n}),e(t.exports,"getFromStorage",function(){return r}),e(t.exports,"localStorageKeys",function(){return o});let n=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(e){console.log(e.messege)}},r=e=>{try{let t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.log(e.messege)}},o={WATCHED:"watched",QUEUE:"queue"}}),o("krGWQ",function(t,a){e(t.exports,"refs",function(){return n});let n={foterLink:document.querySelector(".footer__link"),form:document.querySelector(".header-search-form"),pagination:document.querySelector(".pagination"),btnWrapper:document.querySelector("#buttonWrapper"),addToWatchedBtn:document.querySelector(".add-to-watched-btn"),addToQueueBtn:document.querySelector(".add-to-queue-btn"),moviesLib:document.querySelector(".movies-lib"),watchedQueueBtnBlock:document.querySelector(".buttons-block"),buttonWatched:document.querySelector(".button-watched"),buttonQueue:document.querySelector(".button-queue")}}),o("4NPRg",function(t,a){e(t.exports,"updateLibRender",function(){return c}),e(t.exports,"localPaginate",function(){return d}),e(t.exports,"loadFromStorageWatched",function(){return u}),e(t.exports,"onClickWatched",function(){return g});var n=r("lV0gX"),o=r("b5rV1"),s=r("2nhTy"),i=r("52C1o"),l=r("lJEtM");let c=async e=>{try{let t="";(0,s.resetCurrentPage)();let a=d(e,l.state.currentPage);void 0===e||0===e.length?((0,s.clearPagination)(),t='<li class="watched-img"><p class="watched-warning">No movies added yet.</p></li>'):(t=await (0,n.renderGallery)(a),(0,s.clearPagination)(),(0,s.renderPaginationMarkup)()),i.moviesEl.innerHTML="",(0,i.moviesEl).insertAdjacentHTML("beforeend",t)}catch(e){console.error(e.message)}},d=(e,t)=>{if(!e)return;let a=(t-1)*6;return l.state.totalPages=Math.ceil(e.length/6),e.slice(a,a+6)},u=()=>{let e=(0,o.getFromStorage)(o.localStorageKeys.WATCHED);l.state.whatPaginated="local",l.state.whatchedOrQueue="WATCHED",c(e)},g=async e=>{if("BUTTON"!==e.target.nodeName||e.target.classList.contains("active"))return;let t=document.querySelector(".active"),a=e.target.dataset.value.toUpperCase();l.state.whatchedOrQueue=a,c((0,o.getFromStorage)(o.localStorageKeys[a])),t.classList.remove("active"),e.target.classList.add("active")}}),o("lJEtM",function(t,a){e(t.exports,"state",function(){return n});let n={currentPage:1,totalPages:0,activeFilm:null,query:null,whatPaginated:null,whatchedOrQueue:null,sprite:new URL(r("6bzMm"))}}),o("6bzMm",function(e,t){e.exports=new URL("sprite.a7e02cf8.svg",import.meta.url).toString()}),o("b9l6T",function(e,t){r("gAKaR"),r("7rYDH");var a=r("62bmB"),n=r("b5rV1"),o=r("krGWQ"),s=r("lJEtM");let i=document.getElementById("info-modal"),l=document.getElementById("modal"),c=()=>{l.classList.remove("openModalAnimation"),l.classList.add("closeModalAnimation"),setTimeout(()=>{i.classList.remove("open"),localStorage.removeItem("modalCardData")},600)};window.addEventListener("keydown",e=>{"Escape"===e.key&&c()});let d=document.getElementById("close-modal");d.addEventListener("click",e=>{e.target==d&&c()}),window.onclick=e=>{let t=document.getElementById("info-modal");e.target==t&&c()},window.onload=()=>{let e=document.getElementsByClassName("movies")[0],t=document.getElementsByClassName("movies-lib")[0];e?.addEventListener("click",e=>{a(e)}),t?.addEventListener("click",e=>{a(e)});let a=e=>{let t={...e.target.dataset};if(!Object.keys(t).length)return;s.state.activeFilm=t,localStorage.setItem("modalCardData",JSON.stringify(t)),u();let a=(0,n.getFromStorage)(n.localStorageKeys.WATCHED)||[],r=(0,n.getFromStorage)(n.localStorageKeys.QUEUE)||[];a.find(e=>e.id===s.state.activeFilm.id)?o.refs.addToWatchedBtn.innerText="REMOVE FROM WATCHED":o.refs.addToWatchedBtn.innerText="ADD TO WATCHED",r.find(e=>e.id===s.state.activeFilm.id)?o.refs.addToQueueBtn.innerText="REMOVE FROM QUEUE":o.refs.addToQueueBtn.innerText="ADD TO QUEUE"}};let u=()=>{document.getElementById("info-modal").classList.add("open"),l.classList.add("openModalAnimation"),a.getInitialModalData()}}),o("gAKaR",function(t,a){e(t.exports,"onBtnAddToLibrary",function(){return c}),e(t.exports,"updateMarkupLibrary",function(){return g});var n=r("b5rV1"),o=r("2nhTy"),s=r("krGWQ"),i=r("4NPRg"),l=r("lJEtM");let c=e=>{let t=(0,n.getFromStorage)(n.localStorageKeys.WATCHED)||[],a=(0,n.getFromStorage)(n.localStorageKeys.QUEUE)||[];"ADD TO WATCHED"===e.target.innerText?d(t,n.localStorageKeys.WATCHED,"WATCHED",e):"REMOVE FROM WATCHED"===e.target.innerText?u(t,n.localStorageKeys.WATCHED,"WATCHED",e):"ADD TO QUEUE"===e.target.innerText?d(a,n.localStorageKeys.QUEUE,"QUEUE",e):"REMOVE FROM QUEUE"===e.target.innerText&&u(a,n.localStorageKeys.QUEUE,"QUEUE",e)};function d(e,t,a,r){e.push(l.state.activeFilm),(0,n.setToLocalStorage)(t,e),r.target.innerText=`REMOVE FROM ${a}`}function u(e,t,a,r){let o=e.filter(e=>e.id!==l.state.activeFilm.id);(0,n.setToLocalStorage)(t,o),r.target.innerText=`ADD TO ${a}`}function g(e){"ADD TO WATCHED"===e.target.innerText?m():"REMOVE FROM WATCHED"===e.target.innerText?m():"ADD TO QUEUE"===e.target.innerText?p():"REMOVE FROM QUEUE"===e.target.innerText&&p()}async function m(){(0,o.resetCurrentPage)();let e=(0,n.getFromStorage)(n.localStorageKeys.WATCHED)||[],t=(0,i.localPaginate)(e,l.state.currentPage);(0,i.updateLibRender)(t),f(s.refs.buttonWatched,s.refs.buttonQueue)}async function p(){(0,o.resetCurrentPage)();let e=(0,n.getFromStorage)(n.localStorageKeys.QUEUE)||[],t=(0,i.localPaginate)(e,l.state.currentPage);(0,i.updateLibRender)(t),f(s.refs.buttonQueue,s.refs.buttonWatched)}function f(e,t){e.classList.add("active"),t.classList.remove("active")}}),o("62bmB",function(t,a){e(t.exports,"getInitialModalData",function(){return o});let n=document.createElement("span"),r=document.createElement("span"),o=()=>{let e=JSON.parse(localStorage.getItem("modalCardData")),t=document.getElementById("film-img"),a=document.getElementById("film-title"),o=document.getElementById("votes"),s=document.getElementById("popul"),i=document.getElementById("origTitle"),l=document.getElementById("genre");e.id,t.src="null"!==e.poster_path?t.style.backgroundImage=`url('https://image.tmdb.org/t/p/w500${e.poster_path}')`:t.style.backgroundImage="url('https://i.ibb.co/r76r6Vt/oie-30214851-Ms-Wl-PTS0.png')",a.innerText=e.title?`${e.title}`:"N/A",about.innerText=e.overview?`${e.overview}`:"N/A",n.className="average",r.className="count",n.innerText=e.vote_average?`${(1*e.vote_average).toFixed(1)}`:"N/A",r.innerText=e.vote_count?`/ ${e.vote_count}`:"N/A",o.append(n,r),s.innerText=e.popularity?`${(1*e.popularity).toFixed(1)}`:"N/A",i.innerText=e.original_title?`${e.original_title}`:"N/A",l.innerText=e.genre_ids?`${e.genre_ids}`:"N/A"}}),o("a9okJ",function(e,t){let a={openModal:document.querySelector(".open-modal-team"),closeModal:document.querySelector(".close-modal-team"),teamBackdrop:document.querySelector(".backdrop-modal"),teamModal:document.getElementsByClassName("team__modal")};function n(e){a.teamModal[0].classList.remove("closeModalAnimationTeam"),a.teamBackdrop.classList.add("team__backdrop--hidden"),document.removeEventListener("keydown",r),document.body.style.overflow=""}function r(e){"Escape"===e.code&&(a.teamModal[0].classList.remove("openModalAnimationTeam"),a.teamModal[0].classList.add("closeModalAnimationTeam"),setTimeout(()=>{n()},400),n())}function o(e){e.target===a.teamBackdrop&&(a.teamModal[0].classList.remove("openModalAnimationTeam"),a.teamModal[0].classList.add("closeModalAnimationTeam"),setTimeout(()=>{n()},400))}a.openModal.addEventListener("click",function(e){a.teamBackdrop.classList.remove("team__backdrop--hidden"),document.addEventListener("keydown",r),document.addEventListener("click",o),a.teamModal[0].classList.add("openModalAnimationTeam")}),a.closeModal.addEventListener("click",n)}),o("gjiCh",function(e,t){let a=document.querySelector(".mask");window.addEventListener("load",()=>{a.classList.add("hide")})}),r("kyEFX").register(new URL("",import.meta.url).toString(),JSON.parse('["gTKZt","index.5013692f.js","lp5u4","sprite.a7e02cf8.svg"]'));
//# sourceMappingURL=index.5013692f.js.map
